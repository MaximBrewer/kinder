
<!DOCTYPE html>
<html lang="en"  prefix="og: http://ogp.me/ns#
              video: http://ogp.me/ns/video#
              ya: http://webmaster.yandex.ru/vocabularies/" >
<head>
	<meta charset="UTF-8">
	<title>PlatformCraft</title>
	<link href="//s.platformcraft.ru/video/videojs/video-js5.19.2.min.css" rel="stylesheet">
    
    
    
    
	<link href="//s.platformcraft.ru/video/videojs.addon.css" rel="stylesheet">
</head>
<body style="margin:0px">
	<script src="https://unpkg.com/videojs-flash/dist/videojs-flash.js"></script>
	<script src="https://unpkg.com/videojs-contrib-hls/dist/videojs-contrib-hls.js"></script>

	<video id="video" class="custom-template video-js video-addon-js vjs-default-skin vjs-big-play-centered vjs-fullscreen"   poster="https://montage-cache.cdnvideo.ru/montage/.previews/preview-5fcfdd54ef3db57a2d6ab4b2.jpg" controls preload="none" width="640" height="480" data-setup='{
        "html5": {
            "nativeTextTracks": false
        }
    }'>

		<source src="/playlist1.m3u8" type="application/x-mpegURL" >

		<p class="vjs-no-js">
		To view this video please enable JavaScript, and consider upgrading to a web browser that
			<a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
		</p>
	</video>

    <script src="//s.platformcraft.ru/video/jquery-2.1.4.min.js"></script>
    
    
    
	<script>
        var player = videojs('video',
            {
                'html5': {
                    nativeTextTracks: false
                },
                
            },function(){
            

            this.on("play", function(){
                this.poster('');
                var pauseBtn = document.querySelector('button.vjs-playing');
                if (pauseBtn) {
                    pauseBtn.focus();
                }
            });

            
        });

        
        

        
        

        window.addEventListener('message', event => {
            if (event.data == "start") {
                event.source.postMessage('start:'+player.currentTime(),'*');
            }else if (event.data = "end") {
                event.source.postMessage('end:'+player.currentTime(),'*');
            }
        });
	</script>
</body>
</html>
